{"version":3,"file":"car.js","sources":["store/car.js"],"sourcesContent":["import {\r\n\tdefineStore\r\n} from 'pinia'\r\n\r\nconst useCar = defineStore(\"car\", {\r\n\tstate: () => ({\r\n\t\tcarList: []\r\n\t}),\r\n\tgetters: {\r\n\t\tgetCarList(state) {\r\n\t\t\treturn state.carList\r\n\t\t},\r\n\t\ttotalPrice(state) {\r\n\t\t\treturn state.carList.reduce((prev, next) => {\r\n\t\t\t\treturn prev += (next.price * next.numvalue)\r\n\t\t\t}, 0)\r\n\t\t},\r\n\t\tbuyNum(state) {\r\n\t\t\treturn state.carList.reduce((prev, next) => {\r\n\t\t\t\treturn prev += next.numvalue\r\n\t\t\t}, 0)\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tsetCarList(params) {\r\n\t\t\tlet {\r\n\t\t\t\titem,\r\n\t\t\t\tnum\r\n\t\t\t} = params\r\n\t\t\tlet caritem = {\r\n\t\t\t\tgoodsid: item.id || item.goodsid,\r\n\t\t\t\tnumvalue: num,\r\n\t\t\t\tname: item.name,\r\n\t\t\t\tprice: item.price,\r\n\t\t\t\tbefore_price: item.before_price,\r\n\t\t\t\tthumb: item.thumb\r\n\t\t\t}\r\n\r\n\t\t\tlet idx = this.carList.findIndex(i => i.goodsid == caritem.goodsid)\r\n\t\t\tif (idx >= 0) {\r\n\t\t\t\tthis.carList[idx].numvalue = caritem.numvalue\r\n\t\t\t\tif (caritem.numvalue <= 0) {\r\n\t\t\t\t\tthis.carList.splice(idx, 1)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.carList.unshift(caritem)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default useCar"],"names":["defineStore"],"mappings":";;AAIK,MAAC,SAASA,cAAW,YAAC,OAAO;AAAA,EACjC,OAAO,OAAO;AAAA,IACb,SAAS,CAAE;AAAA,EACb;AAAA,EACC,SAAS;AAAA,IACR,WAAW,OAAO;AACjB,aAAO,MAAM;AAAA,IACb;AAAA,IACD,WAAW,OAAO;AACjB,aAAO,MAAM,QAAQ,OAAO,CAAC,MAAM,SAAS;AAC3C,eAAO,QAAS,KAAK,QAAQ,KAAK;AAAA,MAClC,GAAE,CAAC;AAAA,IACJ;AAAA,IACD,OAAO,OAAO;AACb,aAAO,MAAM,QAAQ,OAAO,CAAC,MAAM,SAAS;AAC3C,eAAO,QAAQ,KAAK;AAAA,MACpB,GAAE,CAAC;AAAA,IACJ;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACR,WAAW,QAAQ;AAClB,UAAI;AAAA,QACH;AAAA,QACA;AAAA,MACJ,IAAO;AACJ,UAAI,UAAU;AAAA,QACb,SAAS,KAAK,MAAM,KAAK;AAAA,QACzB,UAAU;AAAA,QACV,MAAM,KAAK;AAAA,QACX,OAAO,KAAK;AAAA,QACZ,cAAc,KAAK;AAAA,QACnB,OAAO,KAAK;AAAA,MACZ;AAED,UAAI,MAAM,KAAK,QAAQ,UAAU,OAAK,EAAE,WAAW,QAAQ,OAAO;AAClE,UAAI,OAAO,GAAG;AACb,aAAK,QAAQ,GAAG,EAAE,WAAW,QAAQ;AACrC,YAAI,QAAQ,YAAY,GAAG;AAC1B,eAAK,QAAQ,OAAO,KAAK,CAAC;AAAA,QAC1B;AAAA,MACL,OAAU;AACN,aAAK,QAAQ,QAAQ,OAAO;AAAA,MAC5B;AAAA,IAED;AAAA,EACD;AACF,CAAC;;"}