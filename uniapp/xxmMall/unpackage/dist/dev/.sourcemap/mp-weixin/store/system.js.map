{"version":3,"file":"system.js","sources":["store/system.js"],"sourcesContent":["//定义关于system的store\r\nimport {\r\n\tdefineStore\r\n} from 'pinia'\r\n\r\nlet systemInfo = uni.getSystemInfoSync();\r\n// 获取状态栏高度\r\nconst getStatusBarHeight = () => systemInfo.statusBarHeight || 20;\r\n// 获取标题栏高度\r\nconst getTitleBarHeight = () => {\r\n\t// #ifdef MP-WEIXIN\r\n\t// 获取胶囊按钮位置信息\r\n\tlet menuBtnInfo = uni.getMenuButtonBoundingClientRect();\r\n\t// console.log(menuBtnInfo)\r\n\treturn (menuBtnInfo.top - getStatusBarHeight()) * 2 + menuBtnInfo.height\r\n\t// #endif\r\n\r\n\treturn 40\r\n}\r\n/*defineStore 是需要传参数的，其中第一个参数是id，就是一个唯一的值，\r\n简单点说就可以理解成是一个命名空间.\r\n第二个参数就是一个对象，里面有三个模块需要处理，第一个是 state，\r\n第二个是 getters，第三个是 actions。\r\n*/\r\nconst useSystem = defineStore(\"system\", {\r\n\tstate: () => ({\r\n\t\tfoldState: false,\r\n\t}),\r\n\r\n\tgetters: {\r\n\t\t// 顶部状态栏高度\r\n\t\tstatusBarHeight() {\r\n\t\t\treturn getStatusBarHeight()\r\n\t\t},\r\n\t\t// 胶囊按钮高度（包含边距）\r\n\t\ttitleBarHeight() {\r\n\t\t\treturn getTitleBarHeight()\r\n\t\t},\r\n\t\t// 店铺信息栏（body）高度\r\n\t\tbodyBarHeight(state) {\r\n\t\t\treturn state.foldState ? this.titleBarHeight : 100\r\n\t\t},\r\n\t\t// 菜单(免费配送)上边整体的高度\r\n\t\ttotalHeight(state) {\r\n\t\t\t// 含100的部分：顶部状态栏高度 + 胶囊菜单栏高度 + 店铺信息栏（body） + 10px（被下面模块覆盖的部分）\r\n\t\t\treturn state.foldState ? this.statusBarHeight + 10 + this.titleBarHeight + 10 : this\r\n\t\t\t\t.statusBarHeight +\r\n\t\t\t\tthis.titleBarHeight + 100 + 10\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\t// 设置折叠状态\r\n\t\tsetFoldState(value) {\r\n\t\t\tthis.foldState = value\r\n\t\t},\r\n\t}\r\n})\r\n\r\n//暴露这个useSystem模块\r\nexport default useSystem"],"names":["uni","defineStore"],"mappings":";;AAKA,IAAI,aAAaA,cAAAA,MAAI;AAErB,MAAM,qBAAqB,MAAM,WAAW,mBAAmB;AAE/D,MAAM,oBAAoB,MAAM;AAG/B,MAAI,cAAcA,oBAAI;AAEtB,UAAQ,YAAY,MAAM,mBAAkB,KAAM,IAAI,YAAY;AAInE;AAMK,MAAC,YAAYC,cAAW,YAAC,UAAU;AAAA,EACvC,OAAO,OAAO;AAAA,IACb,WAAW;AAAA,EACb;AAAA,EAEC,SAAS;AAAA;AAAA,IAER,kBAAkB;AACjB,aAAO,mBAAoB;AAAA,IAC3B;AAAA;AAAA,IAED,iBAAiB;AAChB,aAAO,kBAAmB;AAAA,IAC1B;AAAA;AAAA,IAED,cAAc,OAAO;AACpB,aAAO,MAAM,YAAY,KAAK,iBAAiB;AAAA,IAC/C;AAAA;AAAA,IAED,YAAY,OAAO;AAElB,aAAO,MAAM,YAAY,KAAK,kBAAkB,KAAK,KAAK,iBAAiB,KAAK,KAC9E,kBACD,KAAK,iBAAiB,MAAM;AAAA,IAC7B;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAER,aAAa,OAAO;AACnB,WAAK,YAAY;AAAA,IACjB;AAAA,EACD;AACF,CAAC;;"}